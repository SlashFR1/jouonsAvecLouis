<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7 Secondes - S√©lection des Joueurs</title>
    <link rel="stylesheet" href="style_7sec1.css">
    <!-- Police sympa pour le style jeu -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Russo+One&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/png" href="../icon/loustic-7sec.png">
    <script>
        const favicon = document.createElement('link');
        favicon.rel = 'icon';
        favicon.type = 'image/png';
        favicon.href = '../loustic-icon.png';
        document.head.appendChild(favicon);
    </script>
</head>

<body>

    <!-- HEADER : Menu, R√®gles, Accueil -->
    <header>
        <script src="../global-menu.js"></script>
    </header>

    <!-- FEN√äTRE MODALE DES R√àGLES -->
    <div id="regles-du-jeu" style="display: none;">
        <h2>üìú Les R√®gles du 7 Secondes</h2>
        <p>Le principe est simple :</p>
        <ul>
            <li>Un joueur est d√©sign√© par le hasard.</li>
            <li>Il a <strong>7 secondes</strong> (ni plus, ni moins) pour r√©pondre √† une question ou r√©aliser un d√©fi.
            </li>
            <li>S'il r√©ussit, il marque un point (ou distribue des gorg√©es).</li>
            <li>S'il √©choue, il boit !</li>
        </ul>
        <button onclick="closeRules()"
            style="margin-top:15px; background:#ff6b6b; border:2px solid #000; padding:10px; border-radius:8px; font-weight:bold; cursor:pointer; box-shadow: 2px 2px 0 #000;">
            J'ai compris !
        </button>
    </div>
    </div>

    <!-- CONTENU PRINCIPAL -->
    <main class="container">
        <h1 class="game-title">7 SECONDES</h1>
        <p class="subtitle">Ajoutez les participants</p>

        <!-- Zone de saisie dynamique -->
        <div class="input-group">
            <input type="text" id="inputJoueur" placeholder="Pr√©nom du joueur..." autocomplete="off">
            <button onclick="ajouterJoueur()" class="btn-add">+</button>
        </div>

        <!-- Liste visuelle des joueurs ajout√©s -->
        <div id="listeJoueurs" class="players-container">
            <!-- Les √©tiquettes des joueurs appara√Ætront ici -->
            <div class="empty-message">Ajoutez au moins 2 joueurs pour commencer !</div>
        </div>

        <!-- Bouton de lancement -->
        <button class="btn-start" onclick="lancerJeu()">C'EST PARTI !</button>
        <footer>
            <div class="footer-content">
                <div class="footer-logo">
                    <a href="https://github.com/ton-pseudo" target="_blank" rel="noopener">
                        <img src="../loustic-icon.png" alt="Logo" class="logo">
                    </a>
                </div>
                <div class="footer-text">
                    ¬© 2026 - Loustic - Tous droits r√©serv√©s.
                    <a href="https://github.com/SlashFR1" target="_blank" rel="noopener" class="github-link">
                        GitHub
                    </a>
                </div>
            </div>
        </footer>
    </main>

    <script>
        // --- 1. GESTION DES JOUEURS ---
        let joueurs = [];
        const inputElement = document.getElementById("inputJoueur");
        const listeElement = document.getElementById("listeJoueurs");

        // Permet d'ajouter avec la touche "Entr√©e"
        inputElement.addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
                ajouterJoueur();
            }
        });

        function ajouterJoueur() {
            const prenom = inputElement.value.trim();

            if (prenom === "") return; // Ne rien faire si vide
            if (joueurs.includes(prenom)) {
                alert("Ce joueur est d√©j√† dans la liste !");
                return;
            }

            // Ajout √† la liste logique
            joueurs.push(prenom);

            // Mise √† jour de l'affichage
            afficherJoueurs();

            // Vider le champ
            inputElement.value = "";
            inputElement.focus();
        }

        function supprimerJoueur(index) {
            joueurs.splice(index, 1); // Retire le joueur du tableau
            afficherJoueurs();
        }

        function afficherJoueurs() {
            listeElement.innerHTML = ""; // On efface tout pour reconstruire

            if (joueurs.length === 0) {
                listeElement.innerHTML = '<div class="empty-message">Ajoutez des joueurs...</div>';
                return;
            }

            joueurs.forEach((joueur, index) => {
                // Cr√©ation de l'√©tiquette joueur
                const tag = document.createElement("div");
                tag.className = "player-tag";
                tag.innerHTML = `
                    <span>${joueur}</span>
                    <button class="delete-btn" onclick="supprimerJoueur(${index})">√ó</button>
                `;
                listeElement.appendChild(tag);
            });
        }

        // --- 2. LANCEMENT DU JEU ---
        function lancerJeu() {
            if (joueurs.length < 2) {
                alert("Il faut au moins 2 joueurs pour jouer !");
                return;
            }

            // Sauvegarde dans le navigateur
            localStorage.setItem("joueurs_7sec", JSON.stringify(joueurs));

            // Redirection vers la page de jeu (adapte le nom du fichier si besoin)
            window.location.href = "7sec2.html";
        }

        // --- 3. GESTION DES R√àGLES ---
        function toggleRegles() {
            const modal = document.getElementById("overlay-regles");
            if (modal.style.display === "flex") {
                modal.style.display = "none";
            } else {
                modal.style.display = "flex";
            }
        }
    </script>
</body>

</html>